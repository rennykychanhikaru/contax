"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/appointments/book/route";
exports.ids = ["app/api/appointments/book/route"];
exports.modules = {

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/../../node_modules/.pnpm/next@14.2.32_@babel+core@7.28.4_react-dom@18.2.0_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fappointments%2Fbook%2Froute&page=%2Fapi%2Fappointments%2Fbook%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fappointments%2Fbook%2Froute.ts&appDir=%2FUsers%2Frennychan%2FPersonal%20Apps%2Fcontax%2Fapps%2Fdemo-web%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Frennychan%2FPersonal%20Apps%2Fcontax%2Fapps%2Fdemo-web&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/next@14.2.32_@babel+core@7.28.4_react-dom@18.2.0_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fappointments%2Fbook%2Froute&page=%2Fapi%2Fappointments%2Fbook%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fappointments%2Fbook%2Froute.ts&appDir=%2FUsers%2Frennychan%2FPersonal%20Apps%2Fcontax%2Fapps%2Fdemo-web%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Frennychan%2FPersonal%20Apps%2Fcontax%2Fapps%2Fdemo-web&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/../../node_modules/.pnpm/next@14.2.32_@babel+core@7.28.4_react-dom@18.2.0_react@18.3.1__react@18.3.1/node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/../../node_modules/.pnpm/next@14.2.32_@babel+core@7.28.4_react-dom@18.2.0_react@18.3.1__react@18.3.1/node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/../../node_modules/.pnpm/next@14.2.32_@babel+core@7.28.4_react-dom@18.2.0_react@18.3.1__react@18.3.1/node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_rennychan_Personal_Apps_contax_apps_demo_web_app_api_appointments_book_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/appointments/book/route.ts */ \"(rsc)/./app/api/appointments/book/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/appointments/book/route\",\n        pathname: \"/api/appointments/book\",\n        filename: \"route\",\n        bundlePath: \"app/api/appointments/book/route\"\n    },\n    resolvedPagePath: \"/Users/rennychan/Personal Apps/contax/apps/demo-web/app/api/appointments/book/route.ts\",\n    nextConfigOutput,\n    userland: _Users_rennychan_Personal_Apps_contax_apps_demo_web_app_api_appointments_book_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/appointments/book/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL25leHRAMTQuMi4zMl9AYmFiZWwrY29yZUA3LjI4LjRfcmVhY3QtZG9tQDE4LjIuMF9yZWFjdEAxOC4zLjFfX3JlYWN0QDE4LjMuMS9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhcHBvaW50bWVudHMlMkZib29rJTJGcm91dGUmcGFnZT0lMkZhcGklMkZhcHBvaW50bWVudHMlMkZib29rJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGYXBwb2ludG1lbnRzJTJGYm9vayUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnJlbm55Y2hhbiUyRlBlcnNvbmFsJTIwQXBwcyUyRmNvbnRheCUyRmFwcHMlMkZkZW1vLXdlYiUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZyZW5ueWNoYW4lMkZQZXJzb25hbCUyMEFwcHMlMkZjb250YXglMkZhcHBzJTJGZGVtby13ZWImaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ3NDO0FBQ25IO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQGNvbnRheC9kZW1vLXdlYi8/ZjYyMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvcmVubnljaGFuL1BlcnNvbmFsIEFwcHMvY29udGF4L2FwcHMvZGVtby13ZWIvYXBwL2FwaS9hcHBvaW50bWVudHMvYm9vay9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvYXBwb2ludG1lbnRzL2Jvb2svcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9hcHBvaW50bWVudHMvYm9va1wiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvYXBwb2ludG1lbnRzL2Jvb2svcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMvcmVubnljaGFuL1BlcnNvbmFsIEFwcHMvY29udGF4L2FwcHMvZGVtby13ZWIvYXBwL2FwaS9hcHBvaW50bWVudHMvYm9vay9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvYXBwb2ludG1lbnRzL2Jvb2svcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/../../node_modules/.pnpm/next@14.2.32_@babel+core@7.28.4_react-dom@18.2.0_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fappointments%2Fbook%2Froute&page=%2Fapi%2Fappointments%2Fbook%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fappointments%2Fbook%2Froute.ts&appDir=%2FUsers%2Frennychan%2FPersonal%20Apps%2Fcontax%2Fapps%2Fdemo-web%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Frennychan%2FPersonal%20Apps%2Fcontax%2Fapps%2Fdemo-web&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/appointments/book/route.ts":
/*!********************************************!*\
  !*** ./app/api/appointments/book/route.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/headers */ \"(rsc)/../../node_modules/.pnpm/next@14.2.32_@babel+core@7.28.4_react-dom@18.2.0_react@18.3.1__react@18.3.1/node_modules/next/dist/api/headers.js\");\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/server */ \"(rsc)/../../node_modules/.pnpm/next@14.2.32_@babel+core@7.28.4_react-dom@18.2.0_react@18.3.1__react@18.3.1/node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_google__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../lib/google */ \"(rsc)/./lib/google.ts\");\n\n\n\nasync function POST(req) {\n    const body = await req.json();\n    const { organizationId, customer, start, end, notes, calendarId = \"primary\" } = body || {};\n    if (!organizationId || !start || !end) {\n        return new Response(JSON.stringify({\n            error: \"organizationId, start, end required\"\n        }), {\n            status: 400\n        });\n    }\n    // DB disabled\n    // Optionally use Google access token\n    const c = (0,next_headers__WEBPACK_IMPORTED_MODULE_0__.cookies)();\n    let gAccessToken = c.get(\"gcal_access\")?.value || c.get(\"gcal_token\")?.value || process.env.GOOGLE_CALENDAR_ACCESS_TOKEN;\n    const refreshTok = c.get(\"gcal_refresh\")?.value;\n    const expiry = Number(c.get(\"gcal_expiry\")?.value || 0);\n    const nowSec = Math.floor(Date.now() / 1000);\n    const setCookies = [];\n    if ((!gAccessToken || expiry && nowSec >= expiry) && refreshTok && process.env.GOOGLE_CLIENT_ID && process.env.GOOGLE_CLIENT_SECRET) {\n        const rt = await (0,_lib_google__WEBPACK_IMPORTED_MODULE_2__.refreshGoogleAccessToken)(refreshTok, process.env.GOOGLE_CLIENT_ID, process.env.GOOGLE_CLIENT_SECRET);\n        if (rt?.access_token) {\n            gAccessToken = rt.access_token;\n            const newExpiry = nowSec + (rt.expires_in || 3600) - 60;\n            setCookies.push({\n                name: \"gcal_access\",\n                value: gAccessToken\n            });\n            setCookies.push({\n                name: \"gcal_expiry\",\n                value: String(newExpiry)\n            });\n            setCookies.push({\n                name: \"gcal_token\",\n                value: gAccessToken\n            });\n        }\n    }\n    // Normalize datetimes using org or account timezone\n    // Use only Google account timezone\n    const accountTz = gAccessToken ? await (0,_lib_google__WEBPACK_IMPORTED_MODULE_2__.getAccountTimezone)(gAccessToken) : null;\n    const baseTz = accountTz || undefined;\n    const normStart = normalizeRfc3339(start, baseTz);\n    const normEnd = normalizeRfc3339(end, baseTz);\n    // No DB pre-check; Google is the source of truth\n    // Guardrail: verify not busy on Google via FreeBusy before inserting\n    if (gAccessToken) {\n        try {\n            let ids = [];\n            const cl = await fetch(\"https://www.googleapis.com/calendar/v3/users/me/calendarList\", {\n                headers: {\n                    Authorization: `Bearer ${gAccessToken}`\n                }\n            }).then((r)=>r.ok ? r.json() : null);\n            if (cl?.items?.length) {\n                ids = cl.items.filter((cal)=>(cal.selected === true || cal.primary === true) && (cal.accessRole === \"owner\" || cal.accessRole === \"writer\")).map((cal)=>cal.id);\n            }\n            if (!ids.length) ids = [\n                calendarId\n            ];\n            const fb = await fetch(\"https://www.googleapis.com/calendar/v3/freeBusy\", {\n                method: \"POST\",\n                headers: {\n                    Authorization: `Bearer ${gAccessToken}`,\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                    timeMin: normStart,\n                    timeMax: normEnd,\n                    timeZone: baseTz || \"UTC\",\n                    items: ids.map((id)=>({\n                            id\n                        }))\n                })\n            });\n            if (fb.ok) {\n                const j = await fb.json();\n                let busy = [];\n                for (const id of ids)busy = busy.concat(j?.calendars?.[id]?.busy || []);\n                if (busy.length) {\n                    const r = next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.json({\n                        error: \"conflict\",\n                        message: \"Requested time is busy on Google Calendar\",\n                        conflicts: busy,\n                        usedGoogleCalendars: ids,\n                        timeZone: baseTz || null\n                    }, {\n                        status: 409\n                    });\n                    setCookies.forEach((kv)=>r.cookies.set(kv.name, kv.value, {\n                            httpOnly: true,\n                            sameSite: \"lax\",\n                            secure: false,\n                            path: \"/\"\n                        }));\n                    return r;\n                }\n            } else {\n                const text = await fb.text();\n                const r = next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.json({\n                    error: \"google_freebusy_failed\",\n                    detail: text\n                }, {\n                    status: 502\n                });\n                setCookies.forEach((kv)=>r.cookies.set(kv.name, kv.value, {\n                        httpOnly: true,\n                        sameSite: \"lax\",\n                        secure: false,\n                        path: \"/\"\n                    }));\n                return r;\n            }\n        } catch (e) {\n            const r = next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.json({\n                error: \"freebusy_exception\",\n                detail: e?.message || \"failed\"\n            }, {\n                status: 502\n            });\n            setCookies.forEach((kv)=>r.cookies.set(kv.name, kv.value, {\n                    httpOnly: true,\n                    sameSite: \"lax\",\n                    secure: false,\n                    path: \"/\"\n                }));\n            return r;\n        }\n    }\n    // No local DB insert\n    let googleEventId;\n    let googleError;\n    if (gAccessToken) {\n        try {\n            const event = {\n                summary: `Appointment: ${customer?.name || \"Customer\"}`,\n                description: `Phone: ${customer?.phone || \"\"}\\n${notes || \"\"}`.trim(),\n                start: {\n                    dateTime: normStart,\n                    timeZone: baseTz\n                },\n                end: {\n                    dateTime: normEnd,\n                    timeZone: baseTz\n                }\n            };\n            const resp = await fetch(`https://www.googleapis.com/calendar/v3/calendars/${encodeURIComponent(calendarId)}/events`, {\n                method: \"POST\",\n                headers: {\n                    Authorization: `Bearer ${gAccessToken}`,\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify(event)\n            });\n            if (resp.ok) {\n                const data = await resp.json();\n                googleEventId = data.id;\n            } else {\n                googleError = `${resp.status} ${await resp.text()}`;\n            }\n        } catch (e) {\n            googleError = e?.message || \"google event create failed\";\n        }\n    }\n    const r = next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.json({\n        appointment: googleEventId ? {\n            google_event_id: googleEventId\n        } : null,\n        googleError,\n        start: normStart,\n        end: normEnd,\n        timeZone: baseTz || null\n    });\n    setCookies.forEach((kv)=>r.cookies.set(kv.name, kv.value, {\n            httpOnly: true,\n            sameSite: \"lax\",\n            secure: false,\n            path: \"/\"\n        }));\n    return r;\n}\n// Helpers shared with availability route\nfunction normalizeRfc3339(input, timeZone) {\n    if (!input) return input;\n    // Always treat the provided wall time as being in the given timezone (ignore incoming offset)\n    let s = input.trim();\n    s = s.replace(/[zZ]$/, \"\").replace(/[+-]\\d{2}:\\d{2}$/, \"\");\n    if (/^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}$/.test(s)) s += \":00\";\n    if (!timeZone) return s + \"Z\";\n    const m = s.match(/^(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2})$/);\n    if (!m) return s + \"Z\";\n    const y = Number(m[1]);\n    const mo = Number(m[2]);\n    const d = Number(m[3]);\n    const h = Number(m[4]);\n    const mi = Number(m[5]);\n    const se = Number(m[6]);\n    const utcProbe = new Date(Date.UTC(y, mo - 1, d, h, mi, se));\n    const offset = tzOffsetString(timeZone, utcProbe);\n    return `${m[1]}-${m[2]}-${m[3]}T${m[4]}:${m[5]}:${m[6]}${offset}`;\n}\nfunction tzOffsetString(timeZone, utcDate) {\n    const fmt = new Intl.DateTimeFormat(\"en-US\", {\n        timeZone,\n        timeZoneName: \"short\",\n        year: \"numeric\",\n        month: \"2-digit\",\n        day: \"2-digit\",\n        hour: \"2-digit\",\n        minute: \"2-digit\",\n        second: \"2-digit\",\n        hour12: false\n    });\n    const parts = fmt.formatToParts(utcDate);\n    const tzName = parts.find((p)=>p.type === \"timeZoneName\")?.value || \"GMT+0\";\n    const m = tzName.match(/GMT([+-])(\\d{1,2})/);\n    if (!m) return \"Z\";\n    const sign = m[1] === \"-\" ? \"-\" : \"+\";\n    const hh = String(Number(m[2])).padStart(2, \"0\");\n    return `${sign}${hh}:00`;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LENBQUMsU0FBUztRQUMzQ2xEO1FBQ0FtRCxjQUFjO1FBQ2RDLE1BQU07UUFBV0MsT0FBTztRQUFXQyxLQUFLO1FBQ3hDQyxNQUFNO1FBQVdDLFFBQVE7UUFBV0MsUUFBUTtRQUFXQyxRQUFRO0lBQ2pFO0lBQ0EsTUFBTUMsUUFBUVgsSUFBSVksYUFBYSxDQUFDYjtJQUNoQyxNQUFNYyxTQUFTRixNQUFNRyxJQUFJLENBQUMsQ0FBQ0MsSUFBTUEsRUFBRUMsSUFBSSxLQUFLLGlCQUFpQmpILFNBQVM7SUFDdEUsTUFBTW9GLElBQUkwQixPQUFPekIsS0FBSyxDQUFDO0lBQ3ZCLElBQUksQ0FBQ0QsR0FBRyxPQUFPO0lBQ2YsTUFBTThCLE9BQU85QixDQUFDLENBQUMsRUFBRSxLQUFLLE1BQU0sTUFBTTtJQUNsQyxNQUFNK0IsS0FBSzlGLE9BQU9mLE9BQU84RSxDQUFDLENBQUMsRUFBRSxHQUFHZ0MsUUFBUSxDQUFDLEdBQUc7SUFDNUMsT0FBTyxDQUFDLEVBQUVGLEtBQUssRUFBRUMsR0FBRyxHQUFHLENBQUM7QUFDMUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AY29udGF4L2RlbW8td2ViLy4vYXBwL2FwaS9hcHBvaW50bWVudHMvYm9vay9yb3V0ZS50cz8zZDFiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0IH0gZnJvbSAnbmV4dC9zZXJ2ZXInXG5pbXBvcnQgeyBjb29raWVzIH0gZnJvbSAnbmV4dC9oZWFkZXJzJ1xuaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInXG5pbXBvcnQgeyByZWZyZXNoR29vZ2xlQWNjZXNzVG9rZW4sIGdldEFjY291bnRUaW1lem9uZSB9IGZyb20gJy4uLy4uLy4uLy4uL2xpYi9nb29nbGUnXG4vLyBObyBEQiB1c2FnZSBpbiBHb29nbGUtb25seSBtb2RlXG5cbnR5cGUgUGF5bG9hZCA9IHtcbiAgb3JnYW5pemF0aW9uSWQ6IHN0cmluZ1xuICBjdXN0b21lcjogeyBuYW1lPzogc3RyaW5nOyBwaG9uZT86IHN0cmluZzsgZW1haWw/OiBzdHJpbmcgfVxuICBzdGFydDogc3RyaW5nIC8vIElTT1xuICBlbmQ6IHN0cmluZyAvLyBJU09cbiAgbm90ZXM/OiBzdHJpbmdcbiAgY2FsZW5kYXJJZD86IHN0cmluZyAvLyBkZWZhdWx0ICdwcmltYXJ5J1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXE6IE5leHRSZXF1ZXN0KSB7XG4gIGNvbnN0IGJvZHkgPSAoYXdhaXQgcmVxLmpzb24oKSkgYXMgUGF5bG9hZFxuICBjb25zdCB7IG9yZ2FuaXphdGlvbklkLCBjdXN0b21lciwgc3RhcnQsIGVuZCwgbm90ZXMsIGNhbGVuZGFySWQgPSAncHJpbWFyeScgfSA9IGJvZHkgfHwge31cbiAgaWYgKCFvcmdhbml6YXRpb25JZCB8fCAhc3RhcnQgfHwgIWVuZCkge1xuICAgIHJldHVybiBuZXcgUmVzcG9uc2UoSlNPTi5zdHJpbmdpZnkoeyBlcnJvcjogJ29yZ2FuaXphdGlvbklkLCBzdGFydCwgZW5kIHJlcXVpcmVkJyB9KSwgeyBzdGF0dXM6IDQwMCB9KVxuICB9XG5cbiAgLy8gREIgZGlzYWJsZWRcblxuICAvLyBPcHRpb25hbGx5IHVzZSBHb29nbGUgYWNjZXNzIHRva2VuXG4gIGNvbnN0IGMgPSBjb29raWVzKClcbiAgbGV0IGdBY2Nlc3NUb2tlbiA9IGMuZ2V0KCdnY2FsX2FjY2VzcycpPy52YWx1ZSB8fCBjLmdldCgnZ2NhbF90b2tlbicpPy52YWx1ZSB8fCBwcm9jZXNzLmVudi5HT09HTEVfQ0FMRU5EQVJfQUNDRVNTX1RPS0VOXG4gIGNvbnN0IHJlZnJlc2hUb2sgPSBjLmdldCgnZ2NhbF9yZWZyZXNoJyk/LnZhbHVlXG4gIGNvbnN0IGV4cGlyeSA9IE51bWJlcihjLmdldCgnZ2NhbF9leHBpcnknKT8udmFsdWUgfHwgMClcbiAgY29uc3Qgbm93U2VjID0gTWF0aC5mbG9vcihEYXRlLm5vdygpIC8gMTAwMClcbiAgY29uc3Qgc2V0Q29va2llczogeyBuYW1lOiBzdHJpbmc7IHZhbHVlOiBzdHJpbmcgfVtdID0gW11cbiAgaWYgKCghZ0FjY2Vzc1Rva2VuIHx8IChleHBpcnkgJiYgbm93U2VjID49IGV4cGlyeSkpICYmIHJlZnJlc2hUb2sgJiYgcHJvY2Vzcy5lbnYuR09PR0xFX0NMSUVOVF9JRCAmJiBwcm9jZXNzLmVudi5HT09HTEVfQ0xJRU5UX1NFQ1JFVCkge1xuICAgIGNvbnN0IHJ0ID0gYXdhaXQgcmVmcmVzaEdvb2dsZUFjY2Vzc1Rva2VuKHJlZnJlc2hUb2ssIHByb2Nlc3MuZW52LkdPT0dMRV9DTElFTlRfSUQsIHByb2Nlc3MuZW52LkdPT0dMRV9DTElFTlRfU0VDUkVUKVxuICAgIGlmIChydD8uYWNjZXNzX3Rva2VuKSB7XG4gICAgICBnQWNjZXNzVG9rZW4gPSBydC5hY2Nlc3NfdG9rZW5cbiAgICAgIGNvbnN0IG5ld0V4cGlyeSA9IG5vd1NlYyArIChydC5leHBpcmVzX2luIHx8IDM2MDApIC0gNjBcbiAgICAgIHNldENvb2tpZXMucHVzaCh7IG5hbWU6ICdnY2FsX2FjY2VzcycsIHZhbHVlOiBnQWNjZXNzVG9rZW4gfSlcbiAgICAgIHNldENvb2tpZXMucHVzaCh7IG5hbWU6ICdnY2FsX2V4cGlyeScsIHZhbHVlOiBTdHJpbmcobmV3RXhwaXJ5KSB9KVxuICAgICAgc2V0Q29va2llcy5wdXNoKHsgbmFtZTogJ2djYWxfdG9rZW4nLCB2YWx1ZTogZ0FjY2Vzc1Rva2VuIH0pXG4gICAgfVxuICB9XG5cbiAgLy8gTm9ybWFsaXplIGRhdGV0aW1lcyB1c2luZyBvcmcgb3IgYWNjb3VudCB0aW1lem9uZVxuICAvLyBVc2Ugb25seSBHb29nbGUgYWNjb3VudCB0aW1lem9uZVxuICBjb25zdCBhY2NvdW50VHogPSBnQWNjZXNzVG9rZW4gPyBhd2FpdCBnZXRBY2NvdW50VGltZXpvbmUoZ0FjY2Vzc1Rva2VuKSA6IG51bGxcbiAgY29uc3QgYmFzZVR6ID0gYWNjb3VudFR6IHx8IHVuZGVmaW5lZFxuICBjb25zdCBub3JtU3RhcnQgPSBub3JtYWxpemVSZmMzMzM5KHN0YXJ0LCBiYXNlVHopXG4gIGNvbnN0IG5vcm1FbmQgPSBub3JtYWxpemVSZmMzMzM5KGVuZCwgYmFzZVR6KVxuXG4gIC8vIE5vIERCIHByZS1jaGVjazsgR29vZ2xlIGlzIHRoZSBzb3VyY2Ugb2YgdHJ1dGhcblxuICAvLyBHdWFyZHJhaWw6IHZlcmlmeSBub3QgYnVzeSBvbiBHb29nbGUgdmlhIEZyZWVCdXN5IGJlZm9yZSBpbnNlcnRpbmdcbiAgaWYgKGdBY2Nlc3NUb2tlbikge1xuICAgIHRyeSB7XG4gICAgICBsZXQgaWRzOiBzdHJpbmdbXSA9IFtdXG4gICAgICBjb25zdCBjbCA9IGF3YWl0IGZldGNoKCdodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9jYWxlbmRhci92My91c2Vycy9tZS9jYWxlbmRhckxpc3QnLCB7XG4gICAgICAgIGhlYWRlcnM6IHsgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2dBY2Nlc3NUb2tlbn1gIH1cbiAgICAgIH0pLnRoZW4oKHIpID0+IChyLm9rID8gci5qc29uKCkgOiBudWxsKSlcbiAgICAgIGlmIChjbD8uaXRlbXM/Lmxlbmd0aCkge1xuICAgICAgICBpZHMgPSBjbC5pdGVtc1xuICAgICAgICAgIC5maWx0ZXIoKGNhbDogYW55KSA9PiAoY2FsLnNlbGVjdGVkID09PSB0cnVlIHx8IGNhbC5wcmltYXJ5ID09PSB0cnVlKSAmJiAoY2FsLmFjY2Vzc1JvbGUgPT09ICdvd25lcicgfHwgY2FsLmFjY2Vzc1JvbGUgPT09ICd3cml0ZXInKSlcbiAgICAgICAgICAubWFwKChjYWw6IGFueSkgPT4gY2FsLmlkKVxuICAgICAgfVxuICAgICAgaWYgKCFpZHMubGVuZ3RoKSBpZHMgPSBbY2FsZW5kYXJJZF1cblxuICAgICAgY29uc3QgZmIgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vY2FsZW5kYXIvdjMvZnJlZUJ1c3knLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBoZWFkZXJzOiB7IEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHtnQWNjZXNzVG9rZW59YCwgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IHRpbWVNaW46IG5vcm1TdGFydCwgdGltZU1heDogbm9ybUVuZCwgdGltZVpvbmU6IGJhc2VUeiB8fCAnVVRDJywgaXRlbXM6IGlkcy5tYXAoKGlkKSA9PiAoeyBpZCB9KSkgfSlcbiAgICAgIH0pXG4gICAgICBpZiAoZmIub2spIHtcbiAgICAgICAgY29uc3QgaiA9IGF3YWl0IGZiLmpzb24oKVxuICAgICAgICBsZXQgYnVzeTogeyBzdGFydDogc3RyaW5nOyBlbmQ6IHN0cmluZyB9W10gPSBbXVxuICAgICAgICBmb3IgKGNvbnN0IGlkIG9mIGlkcykgYnVzeSA9IGJ1c3kuY29uY2F0KGo/LmNhbGVuZGFycz8uW2lkXT8uYnVzeSB8fCBbXSlcbiAgICAgICAgaWYgKGJ1c3kubGVuZ3RoKSB7XG4gICAgICAgICAgY29uc3QgciA9IE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICAgICAgeyBlcnJvcjogJ2NvbmZsaWN0JywgbWVzc2FnZTogJ1JlcXVlc3RlZCB0aW1lIGlzIGJ1c3kgb24gR29vZ2xlIENhbGVuZGFyJywgY29uZmxpY3RzOiBidXN5LCB1c2VkR29vZ2xlQ2FsZW5kYXJzOiBpZHMsIHRpbWVab25lOiBiYXNlVHogfHwgbnVsbCB9LFxuICAgICAgICAgICAgeyBzdGF0dXM6IDQwOSB9XG4gICAgICAgICAgKVxuICAgICAgICAgIHNldENvb2tpZXMuZm9yRWFjaCgoa3YpID0+IHIuY29va2llcy5zZXQoa3YubmFtZSwga3YudmFsdWUsIHsgaHR0cE9ubHk6IHRydWUsIHNhbWVTaXRlOiAnbGF4Jywgc2VjdXJlOiBmYWxzZSwgcGF0aDogJy8nIH0pKVxuICAgICAgICAgIHJldHVybiByXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHRleHQgPSBhd2FpdCBmYi50ZXh0KClcbiAgICAgICAgY29uc3QgciA9IE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdnb29nbGVfZnJlZWJ1c3lfZmFpbGVkJywgZGV0YWlsOiB0ZXh0IH0sIHsgc3RhdHVzOiA1MDIgfSlcbiAgICAgICAgc2V0Q29va2llcy5mb3JFYWNoKChrdikgPT4gci5jb29raWVzLnNldChrdi5uYW1lLCBrdi52YWx1ZSwgeyBodHRwT25seTogdHJ1ZSwgc2FtZVNpdGU6ICdsYXgnLCBzZWN1cmU6IGZhbHNlLCBwYXRoOiAnLycgfSkpXG4gICAgICAgIHJldHVybiByXG4gICAgICB9XG4gICAgfSBjYXRjaCAoZTogYW55KSB7XG4gICAgICBjb25zdCByID0gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ2ZyZWVidXN5X2V4Y2VwdGlvbicsIGRldGFpbDogZT8ubWVzc2FnZSB8fCAnZmFpbGVkJyB9LCB7IHN0YXR1czogNTAyIH0pXG4gICAgICBzZXRDb29raWVzLmZvckVhY2goKGt2KSA9PiByLmNvb2tpZXMuc2V0KGt2Lm5hbWUsIGt2LnZhbHVlLCB7IGh0dHBPbmx5OiB0cnVlLCBzYW1lU2l0ZTogJ2xheCcsIHNlY3VyZTogZmFsc2UsIHBhdGg6ICcvJyB9KSlcbiAgICAgIHJldHVybiByXG4gICAgfVxuICB9XG5cbiAgLy8gTm8gbG9jYWwgREIgaW5zZXJ0XG4gIGxldCBnb29nbGVFdmVudElkOiBzdHJpbmcgfCB1bmRlZmluZWRcbiAgbGV0IGdvb2dsZUVycm9yOiBzdHJpbmcgfCB1bmRlZmluZWRcbiAgaWYgKGdBY2Nlc3NUb2tlbikge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBldmVudCA9IHtcbiAgICAgICAgc3VtbWFyeTogYEFwcG9pbnRtZW50OiAke2N1c3RvbWVyPy5uYW1lIHx8ICdDdXN0b21lcid9YCxcbiAgICAgICAgZGVzY3JpcHRpb246IGBQaG9uZTogJHtjdXN0b21lcj8ucGhvbmUgfHwgJyd9XFxuJHtub3RlcyB8fCAnJ31gLnRyaW0oKSxcbiAgICAgICAgc3RhcnQ6IHsgZGF0ZVRpbWU6IG5vcm1TdGFydCwgdGltZVpvbmU6IGJhc2VUeiB9LFxuICAgICAgICBlbmQ6IHsgZGF0ZVRpbWU6IG5vcm1FbmQsIHRpbWVab25lOiBiYXNlVHogfVxuICAgICAgfVxuICAgICAgY29uc3QgcmVzcCA9IGF3YWl0IGZldGNoKGBodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9jYWxlbmRhci92My9jYWxlbmRhcnMvJHtlbmNvZGVVUklDb21wb25lbnQoY2FsZW5kYXJJZCl9L2V2ZW50c2AsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGhlYWRlcnM6IHsgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2dBY2Nlc3NUb2tlbn1gLCAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGV2ZW50KVxuICAgICAgfSlcbiAgICAgIGlmIChyZXNwLm9rKSB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwLmpzb24oKVxuICAgICAgICBnb29nbGVFdmVudElkID0gZGF0YS5pZFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZ29vZ2xlRXJyb3IgPSBgJHtyZXNwLnN0YXR1c30gJHthd2FpdCByZXNwLnRleHQoKX1gXG4gICAgICB9XG4gICAgfSBjYXRjaCAoZTogYW55KSB7XG4gICAgICBnb29nbGVFcnJvciA9IGU/Lm1lc3NhZ2UgfHwgJ2dvb2dsZSBldmVudCBjcmVhdGUgZmFpbGVkJ1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IHIgPSBOZXh0UmVzcG9uc2UuanNvbih7IGFwcG9pbnRtZW50OiBnb29nbGVFdmVudElkID8geyBnb29nbGVfZXZlbnRfaWQ6IGdvb2dsZUV2ZW50SWQgfSA6IG51bGwsIGdvb2dsZUVycm9yLCBzdGFydDogbm9ybVN0YXJ0LCBlbmQ6IG5vcm1FbmQsIHRpbWVab25lOiBiYXNlVHogfHwgbnVsbCB9KVxuICBzZXRDb29raWVzLmZvckVhY2goKGt2KSA9PiByLmNvb2tpZXMuc2V0KGt2Lm5hbWUsIGt2LnZhbHVlLCB7IGh0dHBPbmx5OiB0cnVlLCBzYW1lU2l0ZTogJ2xheCcsIHNlY3VyZTogZmFsc2UsIHBhdGg6ICcvJyB9KSlcbiAgcmV0dXJuIHJcbn1cblxuLy8gSGVscGVycyBzaGFyZWQgd2l0aCBhdmFpbGFiaWxpdHkgcm91dGVcbmZ1bmN0aW9uIG5vcm1hbGl6ZVJmYzMzMzkoaW5wdXQ6IHN0cmluZywgdGltZVpvbmU/OiBzdHJpbmcpOiBzdHJpbmcge1xuICBpZiAoIWlucHV0KSByZXR1cm4gaW5wdXRcbiAgLy8gQWx3YXlzIHRyZWF0IHRoZSBwcm92aWRlZCB3YWxsIHRpbWUgYXMgYmVpbmcgaW4gdGhlIGdpdmVuIHRpbWV6b25lIChpZ25vcmUgaW5jb21pbmcgb2Zmc2V0KVxuICBsZXQgcyA9IGlucHV0LnRyaW0oKVxuICBzID0gcy5yZXBsYWNlKC9belpdJC8sJycpLnJlcGxhY2UoL1srLV1cXGR7Mn06XFxkezJ9JC8sJycpXG4gIGlmICgvXlxcZHs0fS1cXGR7Mn0tXFxkezJ9VFxcZHsyfTpcXGR7Mn0kLy50ZXN0KHMpKSBzICs9ICc6MDAnXG4gIGlmICghdGltZVpvbmUpIHJldHVybiBzICsgJ1onXG4gIGNvbnN0IG0gPSBzLm1hdGNoKC9eKFxcZHs0fSktKFxcZHsyfSktKFxcZHsyfSlUKFxcZHsyfSk6KFxcZHsyfSk6KFxcZHsyfSkkLylcbiAgaWYgKCFtKSByZXR1cm4gcyArICdaJ1xuICBjb25zdCB5ID0gTnVtYmVyKG1bMV0pOyBjb25zdCBtbyA9IE51bWJlcihtWzJdKTsgY29uc3QgZCA9IE51bWJlcihtWzNdKTsgY29uc3QgaCA9IE51bWJlcihtWzRdKTsgY29uc3QgbWkgPSBOdW1iZXIobVs1XSk7IGNvbnN0IHNlID0gTnVtYmVyKG1bNl0pXG4gIGNvbnN0IHV0Y1Byb2JlID0gbmV3IERhdGUoRGF0ZS5VVEMoeSwgbW8gLSAxLCBkLCBoLCBtaSwgc2UpKVxuICBjb25zdCBvZmZzZXQgPSB0ek9mZnNldFN0cmluZyh0aW1lWm9uZSwgdXRjUHJvYmUpXG4gIHJldHVybiBgJHttWzFdfS0ke21bMl19LSR7bVszXX1UJHttWzRdfToke21bNV19OiR7bVs2XX0ke29mZnNldH1gXG59XG5cbmZ1bmN0aW9uIHR6T2Zmc2V0U3RyaW5nKHRpbWVab25lOiBzdHJpbmcsIHV0Y0RhdGU6IERhdGUpOiBzdHJpbmcge1xuICBjb25zdCBmbXQgPSBuZXcgSW50bC5EYXRlVGltZUZvcm1hdCgnZW4tVVMnLCB7XG4gICAgdGltZVpvbmUsXG4gICAgdGltZVpvbmVOYW1lOiAnc2hvcnQnLFxuICAgIHllYXI6ICdudW1lcmljJywgbW9udGg6ICcyLWRpZ2l0JywgZGF5OiAnMi1kaWdpdCcsXG4gICAgaG91cjogJzItZGlnaXQnLCBtaW51dGU6ICcyLWRpZ2l0Jywgc2Vjb25kOiAnMi1kaWdpdCcsIGhvdXIxMjogZmFsc2VcbiAgfSlcbiAgY29uc3QgcGFydHMgPSBmbXQuZm9ybWF0VG9QYXJ0cyh1dGNEYXRlKVxuICBjb25zdCB0ek5hbWUgPSBwYXJ0cy5maW5kKChwKSA9PiBwLnR5cGUgPT09ICd0aW1lWm9uZU5hbWUnKT8udmFsdWUgfHwgJ0dNVCswJ1xuICBjb25zdCBtID0gdHpOYW1lLm1hdGNoKC9HTVQoWystXSkoXFxkezEsMn0pLylcbiAgaWYgKCFtKSByZXR1cm4gJ1onXG4gIGNvbnN0IHNpZ24gPSBtWzFdID09PSAnLScgPyAnLScgOiAnKydcbiAgY29uc3QgaGggPSBTdHJpbmcoTnVtYmVyKG1bMl0pKS5wYWRTdGFydCgyLCAnMCcpXG4gIHJldHVybiBgJHtzaWdufSR7aGh9OjAwYFxufVxuIl0sIm5hbWVzIjpbImNvb2tpZXMiLCJOZXh0UmVzcG9uc2UiLCJyZWZyZXNoR29vZ2xlQWNjZXNzVG9rZW4iLCJnZXRBY2NvdW50VGltZXpvbmUiLCJQT1NUIiwicmVxIiwiYm9keSIsImpzb24iLCJvcmdhbml6YXRpb25JZCIsImN1c3RvbWVyIiwic3RhcnQiLCJlbmQiLCJub3RlcyIsImNhbGVuZGFySWQiLCJSZXNwb25zZSIsIkpTT04iLCJzdHJpbmdpZnkiLCJlcnJvciIsInN0YXR1cyIsImMiLCJnQWNjZXNzVG9rZW4iLCJnZXQiLCJ2YWx1ZSIsInByb2Nlc3MiLCJlbnYiLCJHT09HTEVfQ0FMRU5EQVJfQUNDRVNTX1RPS0VOIiwicmVmcmVzaFRvayIsImV4cGlyeSIsIk51bWJlciIsIm5vd1NlYyIsIk1hdGgiLCJmbG9vciIsIkRhdGUiLCJub3ciLCJzZXRDb29raWVzIiwiR09PR0xFX0NMSUVOVF9JRCIsIkdPT0dMRV9DTElFTlRfU0VDUkVUIiwicnQiLCJhY2Nlc3NfdG9rZW4iLCJuZXdFeHBpcnkiLCJleHBpcmVzX2luIiwicHVzaCIsIm5hbWUiLCJTdHJpbmciLCJhY2NvdW50VHoiLCJiYXNlVHoiLCJ1bmRlZmluZWQiLCJub3JtU3RhcnQiLCJub3JtYWxpemVSZmMzMzM5Iiwibm9ybUVuZCIsImlkcyIsImNsIiwiZmV0Y2giLCJoZWFkZXJzIiwiQXV0aG9yaXphdGlvbiIsInRoZW4iLCJyIiwib2siLCJpdGVtcyIsImxlbmd0aCIsImZpbHRlciIsImNhbCIsInNlbGVjdGVkIiwicHJpbWFyeSIsImFjY2Vzc1JvbGUiLCJtYXAiLCJpZCIsImZiIiwibWV0aG9kIiwidGltZU1pbiIsInRpbWVNYXgiLCJ0aW1lWm9uZSIsImoiLCJidXN5IiwiY29uY2F0IiwiY2FsZW5kYXJzIiwibWVzc2FnZSIsImNvbmZsaWN0cyIsInVzZWRHb29nbGVDYWxlbmRhcnMiLCJmb3JFYWNoIiwia3YiLCJzZXQiLCJodHRwT25seSIsInNhbWVTaXRlIiwic2VjdXJlIiwicGF0aCIsInRleHQiLCJkZXRhaWwiLCJlIiwiZ29vZ2xlRXZlbnRJZCIsImdvb2dsZUVycm9yIiwiZXZlbnQiLCJzdW1tYXJ5IiwiZGVzY3JpcHRpb24iLCJwaG9uZSIsInRyaW0iLCJkYXRlVGltZSIsInJlc3AiLCJlbmNvZGVVUklDb21wb25lbnQiLCJkYXRhIiwiYXBwb2ludG1lbnQiLCJnb29nbGVfZXZlbnRfaWQiLCJpbnB1dCIsInMiLCJyZXBsYWNlIiwidGVzdCIsIm0iLCJtYXRjaCIsInkiLCJtbyIsImQiLCJoIiwibWkiLCJzZSIsInV0Y1Byb2JlIiwiVVRDIiwib2Zmc2V0IiwidHpPZmZzZXRTdHJpbmciLCJ1dGNEYXRlIiwiZm10IiwiSW50bCIsIkRhdGVUaW1lRm9ybWF0IiwidGltZVpvbmVOYW1lIiwieWVhciIsIm1vbnRoIiwiZGF5IiwiaG91ciIsIm1pbnV0ZSIsInNlY29uZCIsImhvdXIxMiIsInBhcnRzIiwiZm9ybWF0VG9QYXJ0cyIsInR6TmFtZSIsImZpbmQiLCJwIiwidHlwZSIsInNpZ24iLCJoaCIsInBhZFN0YXJ0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/appointments/book/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/google.ts":
/*!***********************!*\
  !*** ./lib/google.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getAccountTimezone: () => (/* binding */ getAccountTimezone),\n/* harmony export */   refreshGoogleAccessToken: () => (/* binding */ refreshGoogleAccessToken)\n/* harmony export */ });\nasync function refreshGoogleAccessToken(refreshToken, clientId, clientSecret) {\n    const r = await fetch(\"https://oauth2.googleapis.com/token\", {\n        method: \"POST\",\n        headers: {\n            \"Content-Type\": \"application/x-www-form-urlencoded\"\n        },\n        body: new URLSearchParams({\n            client_id: clientId,\n            client_secret: clientSecret,\n            refresh_token: refreshToken,\n            grant_type: \"refresh_token\"\n        })\n    });\n    if (!r.ok) return null;\n    return await r.json();\n}\nasync function getAccountTimezone(accessToken) {\n    try {\n        const r = await fetch(\"https://www.googleapis.com/calendar/v3/users/me/settings/timezone\", {\n            headers: {\n                Authorization: `Bearer ${accessToken}`\n            }\n        });\n        if (!r.ok) return null;\n        const j = await r.json();\n        // Response shape: { kind, etag, value: 'Europe/Amsterdam' }\n        return j?.value || null;\n    } catch  {\n        return null;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvZ29vZ2xlLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQU8sZUFBZUEseUJBQ3BCQyxZQUFvQixFQUNwQkMsUUFBZ0IsRUFDaEJDLFlBQW9CO0lBRXBCLE1BQU1DLElBQUksTUFBTUMsTUFBTSx1Q0FBdUM7UUFDM0RDLFFBQVE7UUFDUkMsU0FBUztZQUFFLGdCQUFnQjtRQUFvQztRQUMvREMsTUFBTSxJQUFJQyxnQkFBZ0I7WUFDeEJDLFdBQVdSO1lBQ1hTLGVBQWVSO1lBQ2ZTLGVBQWVYO1lBQ2ZZLFlBQVk7UUFDZDtJQUNGO0lBQ0EsSUFBSSxDQUFDVCxFQUFFVSxFQUFFLEVBQUUsT0FBTztJQUNsQixPQUFRLE1BQU1WLEVBQUVXLElBQUk7QUFDdEI7QUFFTyxlQUFlQyxtQkFBbUJDLFdBQW1CO0lBQzFELElBQUk7UUFDRixNQUFNYixJQUFJLE1BQU1DLE1BQU0scUVBQXFFO1lBQ3pGRSxTQUFTO2dCQUFFVyxlQUFlLENBQUMsT0FBTyxFQUFFRCxZQUFZLENBQUM7WUFBQztRQUNwRDtRQUNBLElBQUksQ0FBQ2IsRUFBRVUsRUFBRSxFQUFFLE9BQU87UUFDbEIsTUFBTUssSUFBSSxNQUFNZixFQUFFVyxJQUFJO1FBQ3RCLDREQUE0RDtRQUM1RCxPQUFPSSxHQUFHQyxTQUFTO0lBQ3JCLEVBQUUsT0FBTTtRQUNOLE9BQU87SUFDVDtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQGNvbnRheC9kZW1vLXdlYi8uL2xpYi9nb29nbGUudHM/M2NlMyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVmcmVzaEdvb2dsZUFjY2Vzc1Rva2VuKFxuICByZWZyZXNoVG9rZW46IHN0cmluZyxcbiAgY2xpZW50SWQ6IHN0cmluZyxcbiAgY2xpZW50U2VjcmV0OiBzdHJpbmdcbik6IFByb21pc2U8eyBhY2Nlc3NfdG9rZW46IHN0cmluZzsgZXhwaXJlc19pbjogbnVtYmVyIH0gfCBudWxsPiB7XG4gIGNvbnN0IHIgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9vYXV0aDIuZ29vZ2xlYXBpcy5jb20vdG9rZW4nLCB7XG4gICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcgfSxcbiAgICBib2R5OiBuZXcgVVJMU2VhcmNoUGFyYW1zKHtcbiAgICAgIGNsaWVudF9pZDogY2xpZW50SWQsXG4gICAgICBjbGllbnRfc2VjcmV0OiBjbGllbnRTZWNyZXQsXG4gICAgICByZWZyZXNoX3Rva2VuOiByZWZyZXNoVG9rZW4sXG4gICAgICBncmFudF90eXBlOiAncmVmcmVzaF90b2tlbidcbiAgICB9KVxuICB9KVxuICBpZiAoIXIub2spIHJldHVybiBudWxsXG4gIHJldHVybiAoYXdhaXQgci5qc29uKCkpIGFzIGFueVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QWNjb3VudFRpbWV6b25lKGFjY2Vzc1Rva2VuOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZyB8IG51bGw+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCByID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2NhbGVuZGFyL3YzL3VzZXJzL21lL3NldHRpbmdzL3RpbWV6b25lJywge1xuICAgICAgaGVhZGVyczogeyBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7YWNjZXNzVG9rZW59YCB9XG4gICAgfSlcbiAgICBpZiAoIXIub2spIHJldHVybiBudWxsXG4gICAgY29uc3QgaiA9IGF3YWl0IHIuanNvbigpXG4gICAgLy8gUmVzcG9uc2Ugc2hhcGU6IHsga2luZCwgZXRhZywgdmFsdWU6ICdFdXJvcGUvQW1zdGVyZGFtJyB9XG4gICAgcmV0dXJuIGo/LnZhbHVlIHx8IG51bGxcbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxufVxuIl0sIm5hbWVzIjpbInJlZnJlc2hHb29nbGVBY2Nlc3NUb2tlbiIsInJlZnJlc2hUb2tlbiIsImNsaWVudElkIiwiY2xpZW50U2VjcmV0IiwiciIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsImJvZHkiLCJVUkxTZWFyY2hQYXJhbXMiLCJjbGllbnRfaWQiLCJjbGllbnRfc2VjcmV0IiwicmVmcmVzaF90b2tlbiIsImdyYW50X3R5cGUiLCJvayIsImpzb24iLCJnZXRBY2NvdW50VGltZXpvbmUiLCJhY2Nlc3NUb2tlbiIsIkF1dGhvcml6YXRpb24iLCJqIiwidmFsdWUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/google.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next@14.2.32_@babel+core@7.28.4_react-dom@18.2.0_react@18.3.1__react@18.3.1"], () => (__webpack_exec__("(rsc)/../../node_modules/.pnpm/next@14.2.32_@babel+core@7.28.4_react-dom@18.2.0_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fappointments%2Fbook%2Froute&page=%2Fapi%2Fappointments%2Fbook%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fappointments%2Fbook%2Froute.ts&appDir=%2FUsers%2Frennychan%2FPersonal%20Apps%2Fcontax%2Fapps%2Fdemo-web%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Frennychan%2FPersonal%20Apps%2Fcontax%2Fapps%2Fdemo-web&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();