"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/appointments/book/route";
exports.ids = ["app/api/appointments/book/route"];
exports.modules = {

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("net");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/../../node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fappointments%2Fbook%2Froute&page=%2Fapi%2Fappointments%2Fbook%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fappointments%2Fbook%2Froute.ts&appDir=%2FUsers%2Frennychan%2FPersonal%20Apps%2Fcontax%2Fapps%2Fdemo-web%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Frennychan%2FPersonal%20Apps%2Fcontax%2Fapps%2Fdemo-web&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fappointments%2Fbook%2Froute&page=%2Fapi%2Fappointments%2Fbook%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fappointments%2Fbook%2Froute.ts&appDir=%2FUsers%2Frennychan%2FPersonal%20Apps%2Fcontax%2Fapps%2Fdemo-web%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Frennychan%2FPersonal%20Apps%2Fcontax%2Fapps%2Fdemo-web&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/../../node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/../../node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/../../node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_rennychan_Personal_Apps_contax_apps_demo_web_app_api_appointments_book_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/appointments/book/route.ts */ \"(rsc)/./app/api/appointments/book/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/appointments/book/route\",\n        pathname: \"/api/appointments/book\",\n        filename: \"route\",\n        bundlePath: \"app/api/appointments/book/route\"\n    },\n    resolvedPagePath: \"/Users/rennychan/Personal Apps/contax/apps/demo-web/app/api/appointments/book/route.ts\",\n    nextConfigOutput,\n    userland: _Users_rennychan_Personal_Apps_contax_apps_demo_web_app_api_appointments_book_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/appointments/book/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vbm9kZV9tb2R1bGVzL25leHQvZGlzdC9idWlsZC93ZWJwYWNrL2xvYWRlcnMvbmV4dC1hcHAtbG9hZGVyLmpzP25hbWU9YXBwJTJGYXBpJTJGYXBwb2ludG1lbnRzJTJGYm9vayUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGYXBwb2ludG1lbnRzJTJGYm9vayUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmFwcG9pbnRtZW50cyUyRmJvb2slMkZyb3V0ZS50cyZhcHBEaXI9JTJGVXNlcnMlMkZyZW5ueWNoYW4lMkZQZXJzb25hbCUyMEFwcHMlMkZjb250YXglMkZhcHBzJTJGZGVtby13ZWIlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlVzZXJzJTJGcmVubnljaGFuJTJGUGVyc29uYWwlMjBBcHBzJTJGY29udGF4JTJGYXBwcyUyRmRlbW8td2ViJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNzQztBQUNuSDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL0Bjb250YXgvZGVtby13ZWIvPzEyYjUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL3Jlbm55Y2hhbi9QZXJzb25hbCBBcHBzL2NvbnRheC9hcHBzL2RlbW8td2ViL2FwcC9hcGkvYXBwb2ludG1lbnRzL2Jvb2svcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2FwcG9pbnRtZW50cy9ib29rL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvYXBwb2ludG1lbnRzL2Jvb2tcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2FwcG9pbnRtZW50cy9ib29rL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL3Jlbm55Y2hhbi9QZXJzb25hbCBBcHBzL2NvbnRheC9hcHBzL2RlbW8td2ViL2FwcC9hcGkvYXBwb2ludG1lbnRzL2Jvb2svcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL2FwcG9pbnRtZW50cy9ib29rL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/../../node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fappointments%2Fbook%2Froute&page=%2Fapi%2Fappointments%2Fbook%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fappointments%2Fbook%2Froute.ts&appDir=%2FUsers%2Frennychan%2FPersonal%20Apps%2Fcontax%2Fapps%2Fdemo-web%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Frennychan%2FPersonal%20Apps%2Fcontax%2Fapps%2Fdemo-web&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/appointments/book/route.ts":
/*!********************************************!*\
  !*** ./app/api/appointments/book/route.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/headers */ \"(rsc)/../../node_modules/next/dist/api/headers.js\");\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/server */ \"(rsc)/../../node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_google__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../lib/google */ \"(rsc)/./lib/google.ts\");\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/../../node_modules/@supabase/supabase-js/dist/module/index.js\");\n\n\n\n\nasync function POST(req) {\n    const body = await req.json();\n    const { organizationId, customer, start, end, notes, calendarId = \"primary\" } = body || {};\n    if (!organizationId || !start || !end) {\n        return new Response(JSON.stringify({\n            error: \"organizationId, start, end required\"\n        }), {\n            status: 400\n        });\n    }\n    const supabaseUrl = process.env.SUPABASE_URL;\n    const supabaseKey = process.env.SUPABASE_SERVICE_ROLE_KEY || process.env.SUPABASE_ANON_KEY;\n    if (!supabaseUrl || !supabaseKey) {\n        return new Response(JSON.stringify({\n            error: \"Missing Supabase env\"\n        }), {\n            status: 500\n        });\n    }\n    const supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_3__.createClient)(supabaseUrl, supabaseKey);\n    // Normalize datetimes with org timezone if needed\n    let orgTz;\n    const { data: orgRow } = await supabase.from(\"organizations\").select(\"timezone\").eq(\"id\", organizationId).single();\n    orgTz = orgRow?.timezone || undefined;\n    const normStart = normalizeRfc3339(start, orgTz);\n    const normEnd = normalizeRfc3339(end, orgTz);\n    // Insert appointment locally first\n    const { data: appt, error } = await supabase.from(\"appointments\").insert({\n        organization_id: organizationId,\n        customer_name: customer?.name || null,\n        customer_phone: customer?.phone || null,\n        customer_email: customer?.email || null,\n        scheduled_start: normStart,\n        scheduled_end: normEnd,\n        status: \"confirmed\",\n        notes: notes || null\n    }).select().single();\n    if (error) {\n        return new Response(JSON.stringify({\n            error: \"DB insert failed\",\n            detail: error.message\n        }), {\n            status: 500\n        });\n    }\n    // Optionally create Google Calendar event if access token provided\n    const c = (0,next_headers__WEBPACK_IMPORTED_MODULE_0__.cookies)();\n    let gAccessToken = c.get(\"gcal_access\")?.value || c.get(\"gcal_token\")?.value || process.env.GOOGLE_CALENDAR_ACCESS_TOKEN;\n    const refreshTok = c.get(\"gcal_refresh\")?.value;\n    const expiry = Number(c.get(\"gcal_expiry\")?.value || 0);\n    const nowSec = Math.floor(Date.now() / 1000);\n    const setCookies = [];\n    if ((!gAccessToken || expiry && nowSec >= expiry) && refreshTok && process.env.GOOGLE_CLIENT_ID && process.env.GOOGLE_CLIENT_SECRET) {\n        const rt = await (0,_lib_google__WEBPACK_IMPORTED_MODULE_2__.refreshGoogleAccessToken)(refreshTok, process.env.GOOGLE_CLIENT_ID, process.env.GOOGLE_CLIENT_SECRET);\n        if (rt?.access_token) {\n            gAccessToken = rt.access_token;\n            const newExpiry = nowSec + (rt.expires_in || 3600) - 60;\n            setCookies.push({\n                name: \"gcal_access\",\n                value: gAccessToken\n            });\n            setCookies.push({\n                name: \"gcal_expiry\",\n                value: String(newExpiry)\n            });\n            setCookies.push({\n                name: \"gcal_token\",\n                value: gAccessToken\n            });\n        }\n    }\n    let googleEventId;\n    let googleError;\n    if (gAccessToken) {\n        try {\n            const event = {\n                summary: `Appointment: ${customer?.name || \"Customer\"}`,\n                description: `Phone: ${customer?.phone || \"\"}\\n${notes || \"\"}`.trim(),\n                start: {\n                    dateTime: normStart\n                },\n                end: {\n                    dateTime: normEnd\n                }\n            };\n            const resp = await fetch(`https://www.googleapis.com/calendar/v3/calendars/${encodeURIComponent(calendarId)}/events`, {\n                method: \"POST\",\n                headers: {\n                    Authorization: `Bearer ${gAccessToken}`,\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify(event)\n            });\n            if (resp.ok) {\n                const data = await resp.json();\n                googleEventId = data.id;\n                await supabase.from(\"appointments\").update({\n                    google_event_id: googleEventId\n                }).eq(\"id\", appt.id);\n            } else {\n                googleError = `${resp.status} ${await resp.text()}`;\n            }\n        } catch (e) {\n            googleError = e?.message || \"google event create failed\";\n        }\n    }\n    const r = next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.json({\n        appointment: {\n            ...appt,\n            google_event_id: googleEventId\n        },\n        googleError,\n        start: normStart,\n        end: normEnd\n    });\n    setCookies.forEach((kv)=>r.cookies.set(kv.name, kv.value, {\n            httpOnly: true,\n            sameSite: \"lax\",\n            secure: false,\n            path: \"/\"\n        }));\n    return r;\n}\n// Helpers shared with availability route\nfunction normalizeRfc3339(input, timeZone) {\n    if (!input) return input;\n    const hasTz = /[zZ]|[+-]\\d{2}:\\d{2}$/.test(input);\n    let s = input;\n    if (/^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}$/.test(s)) s += \":00\";\n    if (hasTz) return s;\n    if (!timeZone) return s + \"Z\";\n    const m = s.match(/^(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2})$/);\n    if (!m) return s + \"Z\";\n    const y = Number(m[1]);\n    const mo = Number(m[2]);\n    const d = Number(m[3]);\n    const h = Number(m[4]);\n    const mi = Number(m[5]);\n    const se = Number(m[6]);\n    const utcProbe = new Date(Date.UTC(y, mo - 1, d, h, mi, se));\n    const offset = tzOffsetString(timeZone, utcProbe);\n    return `${m[1]}-${m[2]}-${m[3]}T${m[4]}:${m[5]}:${m[6]}${offset}`;\n}\nfunction tzOffsetString(timeZone, utcDate) {\n    const fmt = new Intl.DateTimeFormat(\"en-US\", {\n        timeZone,\n        timeZoneName: \"short\",\n        year: \"numeric\",\n        month: \"2-digit\",\n        day: \"2-digit\",\n        hour: \"2-digit\",\n        minute: \"2-digit\",\n        second: \"2-digit\",\n        hour12: false\n    });\n    const parts = fmt.formatToParts(utcDate);\n    const tzName = parts.find((p)=>p.type === \"timeZoneName\")?.value || \"GMT+0\";\n    const m = tzName.match(/GMT([+-])(\\d{1,2})/);\n    if (!m) return \"Z\";\n    const sign = m[1] === \"-\" ? \"-\" : \"+\";\n    const hh = String(Number(m[2])).padStart(2, \"0\");\n    return `${sign}${hh}:00`;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2FwcG9pbnRtZW50cy9ib29rL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQ3NDO0FBQ0k7QUFDdUI7QUFDYjtBQVc3QyxlQUFlSSxLQUFLQyxHQUFnQjtJQUN6QyxNQUFNQyxPQUFRLE1BQU1ELElBQUlFLElBQUk7SUFDNUIsTUFBTSxFQUFFQyxjQUFjLEVBQUVDLFFBQVEsRUFBRUMsS0FBSyxFQUFFQyxHQUFHLEVBQUVDLEtBQUssRUFBRUMsYUFBYSxTQUFTLEVBQUUsR0FBR1AsUUFBUSxDQUFDO0lBQ3pGLElBQUksQ0FBQ0Usa0JBQWtCLENBQUNFLFNBQVMsQ0FBQ0MsS0FBSztRQUNyQyxPQUFPLElBQUlHLFNBQVNDLEtBQUtDLFNBQVMsQ0FBQztZQUFFQyxPQUFPO1FBQXNDLElBQUk7WUFBRUMsUUFBUTtRQUFJO0lBQ3RHO0lBRUEsTUFBTUMsY0FBY0MsUUFBUUMsR0FBRyxDQUFDQyxZQUFZO0lBQzVDLE1BQU1DLGNBQWNILFFBQVFDLEdBQUcsQ0FBQ0cseUJBQXlCLElBQUlKLFFBQVFDLEdBQUcsQ0FBQ0ksaUJBQWlCO0lBQzFGLElBQUksQ0FBQ04sZUFBZSxDQUFDSSxhQUFhO1FBQ2hDLE9BQU8sSUFBSVQsU0FBU0MsS0FBS0MsU0FBUyxDQUFDO1lBQUVDLE9BQU87UUFBdUIsSUFBSTtZQUFFQyxRQUFRO1FBQUk7SUFDdkY7SUFDQSxNQUFNUSxXQUFXdkIsbUVBQVlBLENBQUNnQixhQUFhSTtJQUUzQyxrREFBa0Q7SUFDbEQsSUFBSUk7SUFDSixNQUFNLEVBQUVDLE1BQU1DLE1BQU0sRUFBRSxHQUFHLE1BQU1ILFNBQVNJLElBQUksQ0FBQyxpQkFBaUJDLE1BQU0sQ0FBQyxZQUFZQyxFQUFFLENBQUMsTUFBTXhCLGdCQUFnQnlCLE1BQU07SUFDaEhOLFFBQVFFLFFBQVFLLFlBQVlDO0lBQzVCLE1BQU1DLFlBQVlDLGlCQUFpQjNCLE9BQU9pQjtJQUMxQyxNQUFNVyxVQUFVRCxpQkFBaUIxQixLQUFLZ0I7SUFFdEMsbUNBQW1DO0lBQ25DLE1BQU0sRUFBRUMsTUFBTVcsSUFBSSxFQUFFdEIsS0FBSyxFQUFFLEdBQUcsTUFBTVMsU0FDakNJLElBQUksQ0FBQyxnQkFDTFUsTUFBTSxDQUFDO1FBQ05DLGlCQUFpQmpDO1FBQ2pCa0MsZUFBZWpDLFVBQVVrQyxRQUFRO1FBQ2pDQyxnQkFBZ0JuQyxVQUFVb0MsU0FBUztRQUNuQ0MsZ0JBQWdCckMsVUFBVXNDLFNBQVM7UUFDbkNDLGlCQUFpQlo7UUFDakJhLGVBQWVYO1FBQ2ZwQixRQUFRO1FBQ1JOLE9BQU9BLFNBQVM7SUFDbEIsR0FDQ21CLE1BQU0sR0FDTkUsTUFBTTtJQUVULElBQUloQixPQUFPO1FBQ1QsT0FBTyxJQUFJSCxTQUFTQyxLQUFLQyxTQUFTLENBQUM7WUFBRUMsT0FBTztZQUFvQmlDLFFBQVFqQyxNQUFNa0MsT0FBTztRQUFDLElBQUk7WUFBRWpDLFFBQVE7UUFBSTtJQUMxRztJQUVBLG1FQUFtRTtJQUNuRSxNQUFNa0MsSUFBSXBELHFEQUFPQTtJQUNqQixJQUFJcUQsZUFBZUQsRUFBRUUsR0FBRyxDQUFDLGdCQUFnQkMsU0FBU0gsRUFBRUUsR0FBRyxDQUFDLGVBQWVDLFNBQVNuQyxRQUFRQyxHQUFHLENBQUNtQyw0QkFBNEI7SUFDeEgsTUFBTUMsYUFBYUwsRUFBRUUsR0FBRyxDQUFDLGlCQUFpQkM7SUFDMUMsTUFBTUcsU0FBU0MsT0FBT1AsRUFBRUUsR0FBRyxDQUFDLGdCQUFnQkMsU0FBUztJQUNyRCxNQUFNSyxTQUFTQyxLQUFLQyxLQUFLLENBQUNDLEtBQUtDLEdBQUcsS0FBSztJQUN2QyxNQUFNQyxhQUFnRCxFQUFFO0lBQ3hELElBQUksQ0FBQyxDQUFDWixnQkFBaUJLLFVBQVVFLFVBQVVGLE1BQU0sS0FBTUQsY0FBY3JDLFFBQVFDLEdBQUcsQ0FBQzZDLGdCQUFnQixJQUFJOUMsUUFBUUMsR0FBRyxDQUFDOEMsb0JBQW9CLEVBQUU7UUFDckksTUFBTUMsS0FBSyxNQUFNbEUscUVBQXdCQSxDQUFDdUQsWUFBWXJDLFFBQVFDLEdBQUcsQ0FBQzZDLGdCQUFnQixFQUFFOUMsUUFBUUMsR0FBRyxDQUFDOEMsb0JBQW9CO1FBQ3BILElBQUlDLElBQUlDLGNBQWM7WUFDcEJoQixlQUFlZSxHQUFHQyxZQUFZO1lBQzlCLE1BQU1DLFlBQVlWLFNBQVVRLENBQUFBLEdBQUdHLFVBQVUsSUFBSSxJQUFHLElBQUs7WUFDckROLFdBQVdPLElBQUksQ0FBQztnQkFBRTdCLE1BQU07Z0JBQWVZLE9BQU9GO1lBQWE7WUFDM0RZLFdBQVdPLElBQUksQ0FBQztnQkFBRTdCLE1BQU07Z0JBQWVZLE9BQU9rQixPQUFPSDtZQUFXO1lBQ2hFTCxXQUFXTyxJQUFJLENBQUM7Z0JBQUU3QixNQUFNO2dCQUFjWSxPQUFPRjtZQUFhO1FBQzVEO0lBQ0Y7SUFDQSxJQUFJcUI7SUFDSixJQUFJQztJQUNKLElBQUl0QixjQUFjO1FBQ2hCLElBQUk7WUFDRixNQUFNdUIsUUFBUTtnQkFDWkMsU0FBUyxDQUFDLGFBQWEsRUFBRXBFLFVBQVVrQyxRQUFRLFdBQVcsQ0FBQztnQkFDdkRtQyxhQUFhLENBQUMsT0FBTyxFQUFFckUsVUFBVW9DLFNBQVMsR0FBRyxFQUFFLEVBQUVqQyxTQUFTLEdBQUcsQ0FBQyxDQUFDbUUsSUFBSTtnQkFDbkVyRSxPQUFPO29CQUFFc0UsVUFBVTVDO2dCQUFVO2dCQUM3QnpCLEtBQUs7b0JBQUVxRSxVQUFVMUM7Z0JBQVE7WUFDM0I7WUFDQSxNQUFNMkMsT0FBTyxNQUFNQyxNQUFNLENBQUMsaURBQWlELEVBQUVDLG1CQUFtQnRFLFlBQVksT0FBTyxDQUFDLEVBQUU7Z0JBQ3BIdUUsUUFBUTtnQkFDUkMsU0FBUztvQkFBRUMsZUFBZSxDQUFDLE9BQU8sRUFBRWpDLGFBQWEsQ0FBQztvQkFBRSxnQkFBZ0I7Z0JBQW1CO2dCQUN2Ri9DLE1BQU1TLEtBQUtDLFNBQVMsQ0FBQzREO1lBQ3ZCO1lBQ0EsSUFBSUssS0FBS00sRUFBRSxFQUFFO2dCQUNYLE1BQU0zRCxPQUFPLE1BQU1xRCxLQUFLMUUsSUFBSTtnQkFDNUJtRSxnQkFBZ0I5QyxLQUFLNEQsRUFBRTtnQkFDdkIsTUFBTTlELFNBQVNJLElBQUksQ0FBQyxnQkFBZ0IyRCxNQUFNLENBQUM7b0JBQUVDLGlCQUFpQmhCO2dCQUFjLEdBQUcxQyxFQUFFLENBQUMsTUFBTU8sS0FBS2lELEVBQUU7WUFDakcsT0FBTztnQkFDTGIsY0FBYyxDQUFDLEVBQUVNLEtBQUsvRCxNQUFNLENBQUMsQ0FBQyxFQUFFLE1BQU0rRCxLQUFLVSxJQUFJLEdBQUcsQ0FBQztZQUNyRDtRQUNGLEVBQUUsT0FBT0MsR0FBUTtZQUNmakIsY0FBY2lCLEdBQUd6QyxXQUFXO1FBQzlCO0lBQ0Y7SUFFQSxNQUFNMEMsSUFBSTVGLHFEQUFZQSxDQUFDTSxJQUFJLENBQUM7UUFBRXVGLGFBQWE7WUFBRSxHQUFHdkQsSUFBSTtZQUFFbUQsaUJBQWlCaEI7UUFBYztRQUFHQztRQUFhakUsT0FBTzBCO1FBQVd6QixLQUFLMkI7SUFBUTtJQUNwSTJCLFdBQVc4QixPQUFPLENBQUMsQ0FBQ0MsS0FBT0gsRUFBRTdGLE9BQU8sQ0FBQ2lHLEdBQUcsQ0FBQ0QsR0FBR3JELElBQUksRUFBRXFELEdBQUd6QyxLQUFLLEVBQUU7WUFBRTJDLFVBQVU7WUFBTUMsVUFBVTtZQUFPQyxRQUFRO1lBQU9DLE1BQU07UUFBSTtJQUN4SCxPQUFPUjtBQUNUO0FBRUEseUNBQXlDO0FBQ3pDLFNBQVN4RCxpQkFBaUJpRSxLQUFhLEVBQUVDLFFBQWlCO0lBQ3hELElBQUksQ0FBQ0QsT0FBTyxPQUFPQTtJQUNuQixNQUFNRSxRQUFRLHdCQUF3QkMsSUFBSSxDQUFDSDtJQUMzQyxJQUFJSSxJQUFJSjtJQUNSLElBQUksa0NBQWtDRyxJQUFJLENBQUNDLElBQUlBLEtBQUs7SUFDcEQsSUFBSUYsT0FBTyxPQUFPRTtJQUNsQixJQUFJLENBQUNILFVBQVUsT0FBT0csSUFBSTtJQUMxQixNQUFNQyxJQUFJRCxFQUFFRSxLQUFLLENBQUM7SUFDbEIsSUFBSSxDQUFDRCxHQUFHLE9BQU9ELElBQUk7SUFDbkIsTUFBTUcsSUFBSWxELE9BQU9nRCxDQUFDLENBQUMsRUFBRTtJQUFHLE1BQU1HLEtBQUtuRCxPQUFPZ0QsQ0FBQyxDQUFDLEVBQUU7SUFBRyxNQUFNSSxJQUFJcEQsT0FBT2dELENBQUMsQ0FBQyxFQUFFO0lBQUcsTUFBTUssSUFBSXJELE9BQU9nRCxDQUFDLENBQUMsRUFBRTtJQUFHLE1BQU1NLEtBQUt0RCxPQUFPZ0QsQ0FBQyxDQUFDLEVBQUU7SUFBRyxNQUFNTyxLQUFLdkQsT0FBT2dELENBQUMsQ0FBQyxFQUFFO0lBQ2hKLE1BQU1RLFdBQVcsSUFBSXBELEtBQUtBLEtBQUtxRCxHQUFHLENBQUNQLEdBQUdDLEtBQUssR0FBR0MsR0FBR0MsR0FBR0MsSUFBSUM7SUFDeEQsTUFBTUcsU0FBU0MsZUFBZWYsVUFBVVk7SUFDeEMsT0FBTyxDQUFDLEVBQUVSLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFQSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRUEsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUVBLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFQSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRUEsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFVSxPQUFPLENBQUM7QUFDbkU7QUFFQSxTQUFTQyxlQUFlZixRQUFnQixFQUFFZ0IsT0FBYTtJQUNyRCxNQUFNQyxNQUFNLElBQUlDLEtBQUtDLGNBQWMsQ0FBQyxTQUFTO1FBQzNDbkI7UUFDQW9CLGNBQWM7UUFDZEMsTUFBTTtRQUFXQyxPQUFPO1FBQVdDLEtBQUs7UUFDeENDLE1BQU07UUFBV0MsUUFBUTtRQUFXQyxRQUFRO1FBQVdDLFFBQVE7SUFDakU7SUFDQSxNQUFNQyxRQUFRWCxJQUFJWSxhQUFhLENBQUNiO0lBQ2hDLE1BQU1jLFNBQVNGLE1BQU1HLElBQUksQ0FBQyxDQUFDQyxJQUFNQSxFQUFFQyxJQUFJLEtBQUssaUJBQWlCakYsU0FBUztJQUN0RSxNQUFNb0QsSUFBSTBCLE9BQU96QixLQUFLLENBQUM7SUFDdkIsSUFBSSxDQUFDRCxHQUFHLE9BQU87SUFDZixNQUFNOEIsT0FBTzlCLENBQUMsQ0FBQyxFQUFFLEtBQUssTUFBTSxNQUFNO0lBQ2xDLE1BQU0rQixLQUFLakUsT0FBT2QsT0FBT2dELENBQUMsQ0FBQyxFQUFFLEdBQUdnQyxRQUFRLENBQUMsR0FBRztJQUM1QyxPQUFPLENBQUMsRUFBRUYsS0FBSyxFQUFFQyxHQUFHLEdBQUcsQ0FBQztBQUMxQiIsInNvdXJjZXMiOlsid2VicGFjazovL0Bjb250YXgvZGVtby13ZWIvLi9hcHAvYXBpL2FwcG9pbnRtZW50cy9ib29rL3JvdXRlLnRzPzNkMWIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QgfSBmcm9tICduZXh0L3NlcnZlcidcbmltcG9ydCB7IGNvb2tpZXMgfSBmcm9tICduZXh0L2hlYWRlcnMnXG5pbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcidcbmltcG9ydCB7IHJlZnJlc2hHb29nbGVBY2Nlc3NUb2tlbiB9IGZyb20gJy4uLy4uLy4uLy4uL2xpYi9nb29nbGUnXG5pbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tICdAc3VwYWJhc2Uvc3VwYWJhc2UtanMnXG5cbnR5cGUgUGF5bG9hZCA9IHtcbiAgb3JnYW5pemF0aW9uSWQ6IHN0cmluZ1xuICBjdXN0b21lcjogeyBuYW1lPzogc3RyaW5nOyBwaG9uZT86IHN0cmluZzsgZW1haWw/OiBzdHJpbmcgfVxuICBzdGFydDogc3RyaW5nIC8vIElTT1xuICBlbmQ6IHN0cmluZyAvLyBJU09cbiAgbm90ZXM/OiBzdHJpbmdcbiAgY2FsZW5kYXJJZD86IHN0cmluZyAvLyBkZWZhdWx0ICdwcmltYXJ5J1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXE6IE5leHRSZXF1ZXN0KSB7XG4gIGNvbnN0IGJvZHkgPSAoYXdhaXQgcmVxLmpzb24oKSkgYXMgUGF5bG9hZFxuICBjb25zdCB7IG9yZ2FuaXphdGlvbklkLCBjdXN0b21lciwgc3RhcnQsIGVuZCwgbm90ZXMsIGNhbGVuZGFySWQgPSAncHJpbWFyeScgfSA9IGJvZHkgfHwge31cbiAgaWYgKCFvcmdhbml6YXRpb25JZCB8fCAhc3RhcnQgfHwgIWVuZCkge1xuICAgIHJldHVybiBuZXcgUmVzcG9uc2UoSlNPTi5zdHJpbmdpZnkoeyBlcnJvcjogJ29yZ2FuaXphdGlvbklkLCBzdGFydCwgZW5kIHJlcXVpcmVkJyB9KSwgeyBzdGF0dXM6IDQwMCB9KVxuICB9XG5cbiAgY29uc3Qgc3VwYWJhc2VVcmwgPSBwcm9jZXNzLmVudi5TVVBBQkFTRV9VUkxcbiAgY29uc3Qgc3VwYWJhc2VLZXkgPSBwcm9jZXNzLmVudi5TVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZIHx8IHByb2Nlc3MuZW52LlNVUEFCQVNFX0FOT05fS0VZXG4gIGlmICghc3VwYWJhc2VVcmwgfHwgIXN1cGFiYXNlS2V5KSB7XG4gICAgcmV0dXJuIG5ldyBSZXNwb25zZShKU09OLnN0cmluZ2lmeSh7IGVycm9yOiAnTWlzc2luZyBTdXBhYmFzZSBlbnYnIH0pLCB7IHN0YXR1czogNTAwIH0pXG4gIH1cbiAgY29uc3Qgc3VwYWJhc2UgPSBjcmVhdGVDbGllbnQoc3VwYWJhc2VVcmwsIHN1cGFiYXNlS2V5KVxuXG4gIC8vIE5vcm1hbGl6ZSBkYXRldGltZXMgd2l0aCBvcmcgdGltZXpvbmUgaWYgbmVlZGVkXG4gIGxldCBvcmdUejogc3RyaW5nIHwgdW5kZWZpbmVkXG4gIGNvbnN0IHsgZGF0YTogb3JnUm93IH0gPSBhd2FpdCBzdXBhYmFzZS5mcm9tKCdvcmdhbml6YXRpb25zJykuc2VsZWN0KCd0aW1lem9uZScpLmVxKCdpZCcsIG9yZ2FuaXphdGlvbklkKS5zaW5nbGUoKVxuICBvcmdUeiA9IG9yZ1Jvdz8udGltZXpvbmUgfHwgdW5kZWZpbmVkXG4gIGNvbnN0IG5vcm1TdGFydCA9IG5vcm1hbGl6ZVJmYzMzMzkoc3RhcnQsIG9yZ1R6KVxuICBjb25zdCBub3JtRW5kID0gbm9ybWFsaXplUmZjMzMzOShlbmQsIG9yZ1R6KVxuXG4gIC8vIEluc2VydCBhcHBvaW50bWVudCBsb2NhbGx5IGZpcnN0XG4gIGNvbnN0IHsgZGF0YTogYXBwdCwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oJ2FwcG9pbnRtZW50cycpXG4gICAgLmluc2VydCh7XG4gICAgICBvcmdhbml6YXRpb25faWQ6IG9yZ2FuaXphdGlvbklkLFxuICAgICAgY3VzdG9tZXJfbmFtZTogY3VzdG9tZXI/Lm5hbWUgfHwgbnVsbCxcbiAgICAgIGN1c3RvbWVyX3Bob25lOiBjdXN0b21lcj8ucGhvbmUgfHwgbnVsbCxcbiAgICAgIGN1c3RvbWVyX2VtYWlsOiBjdXN0b21lcj8uZW1haWwgfHwgbnVsbCxcbiAgICAgIHNjaGVkdWxlZF9zdGFydDogbm9ybVN0YXJ0LFxuICAgICAgc2NoZWR1bGVkX2VuZDogbm9ybUVuZCxcbiAgICAgIHN0YXR1czogJ2NvbmZpcm1lZCcsXG4gICAgICBub3Rlczogbm90ZXMgfHwgbnVsbFxuICAgIH0pXG4gICAgLnNlbGVjdCgpXG4gICAgLnNpbmdsZSgpXG5cbiAgaWYgKGVycm9yKSB7XG4gICAgcmV0dXJuIG5ldyBSZXNwb25zZShKU09OLnN0cmluZ2lmeSh7IGVycm9yOiAnREIgaW5zZXJ0IGZhaWxlZCcsIGRldGFpbDogZXJyb3IubWVzc2FnZSB9KSwgeyBzdGF0dXM6IDUwMCB9KVxuICB9XG5cbiAgLy8gT3B0aW9uYWxseSBjcmVhdGUgR29vZ2xlIENhbGVuZGFyIGV2ZW50IGlmIGFjY2VzcyB0b2tlbiBwcm92aWRlZFxuICBjb25zdCBjID0gY29va2llcygpXG4gIGxldCBnQWNjZXNzVG9rZW4gPSBjLmdldCgnZ2NhbF9hY2Nlc3MnKT8udmFsdWUgfHwgYy5nZXQoJ2djYWxfdG9rZW4nKT8udmFsdWUgfHwgcHJvY2Vzcy5lbnYuR09PR0xFX0NBTEVOREFSX0FDQ0VTU19UT0tFTlxuICBjb25zdCByZWZyZXNoVG9rID0gYy5nZXQoJ2djYWxfcmVmcmVzaCcpPy52YWx1ZVxuICBjb25zdCBleHBpcnkgPSBOdW1iZXIoYy5nZXQoJ2djYWxfZXhwaXJ5Jyk/LnZhbHVlIHx8IDApXG4gIGNvbnN0IG5vd1NlYyA9IE1hdGguZmxvb3IoRGF0ZS5ub3coKSAvIDEwMDApXG4gIGNvbnN0IHNldENvb2tpZXM6IHsgbmFtZTogc3RyaW5nOyB2YWx1ZTogc3RyaW5nIH1bXSA9IFtdXG4gIGlmICgoIWdBY2Nlc3NUb2tlbiB8fCAoZXhwaXJ5ICYmIG5vd1NlYyA+PSBleHBpcnkpKSAmJiByZWZyZXNoVG9rICYmIHByb2Nlc3MuZW52LkdPT0dMRV9DTElFTlRfSUQgJiYgcHJvY2Vzcy5lbnYuR09PR0xFX0NMSUVOVF9TRUNSRVQpIHtcbiAgICBjb25zdCBydCA9IGF3YWl0IHJlZnJlc2hHb29nbGVBY2Nlc3NUb2tlbihyZWZyZXNoVG9rLCBwcm9jZXNzLmVudi5HT09HTEVfQ0xJRU5UX0lELCBwcm9jZXNzLmVudi5HT09HTEVfQ0xJRU5UX1NFQ1JFVClcbiAgICBpZiAocnQ/LmFjY2Vzc190b2tlbikge1xuICAgICAgZ0FjY2Vzc1Rva2VuID0gcnQuYWNjZXNzX3Rva2VuXG4gICAgICBjb25zdCBuZXdFeHBpcnkgPSBub3dTZWMgKyAocnQuZXhwaXJlc19pbiB8fCAzNjAwKSAtIDYwXG4gICAgICBzZXRDb29raWVzLnB1c2goeyBuYW1lOiAnZ2NhbF9hY2Nlc3MnLCB2YWx1ZTogZ0FjY2Vzc1Rva2VuIH0pXG4gICAgICBzZXRDb29raWVzLnB1c2goeyBuYW1lOiAnZ2NhbF9leHBpcnknLCB2YWx1ZTogU3RyaW5nKG5ld0V4cGlyeSkgfSlcbiAgICAgIHNldENvb2tpZXMucHVzaCh7IG5hbWU6ICdnY2FsX3Rva2VuJywgdmFsdWU6IGdBY2Nlc3NUb2tlbiB9KVxuICAgIH1cbiAgfVxuICBsZXQgZ29vZ2xlRXZlbnRJZDogc3RyaW5nIHwgdW5kZWZpbmVkXG4gIGxldCBnb29nbGVFcnJvcjogc3RyaW5nIHwgdW5kZWZpbmVkXG4gIGlmIChnQWNjZXNzVG9rZW4pIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgZXZlbnQgPSB7XG4gICAgICAgIHN1bW1hcnk6IGBBcHBvaW50bWVudDogJHtjdXN0b21lcj8ubmFtZSB8fCAnQ3VzdG9tZXInfWAsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBgUGhvbmU6ICR7Y3VzdG9tZXI/LnBob25lIHx8ICcnfVxcbiR7bm90ZXMgfHwgJyd9YC50cmltKCksXG4gICAgICAgIHN0YXJ0OiB7IGRhdGVUaW1lOiBub3JtU3RhcnQgfSxcbiAgICAgICAgZW5kOiB7IGRhdGVUaW1lOiBub3JtRW5kIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IHJlc3AgPSBhd2FpdCBmZXRjaChgaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vY2FsZW5kYXIvdjMvY2FsZW5kYXJzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KGNhbGVuZGFySWQpfS9ldmVudHNgLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBoZWFkZXJzOiB7IEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHtnQWNjZXNzVG9rZW59YCwgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShldmVudClcbiAgICAgIH0pXG4gICAgICBpZiAocmVzcC5vaykge1xuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcC5qc29uKClcbiAgICAgICAgZ29vZ2xlRXZlbnRJZCA9IGRhdGEuaWRcbiAgICAgICAgYXdhaXQgc3VwYWJhc2UuZnJvbSgnYXBwb2ludG1lbnRzJykudXBkYXRlKHsgZ29vZ2xlX2V2ZW50X2lkOiBnb29nbGVFdmVudElkIH0pLmVxKCdpZCcsIGFwcHQuaWQpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBnb29nbGVFcnJvciA9IGAke3Jlc3Auc3RhdHVzfSAke2F3YWl0IHJlc3AudGV4dCgpfWBcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlOiBhbnkpIHtcbiAgICAgIGdvb2dsZUVycm9yID0gZT8ubWVzc2FnZSB8fCAnZ29vZ2xlIGV2ZW50IGNyZWF0ZSBmYWlsZWQnXG4gICAgfVxuICB9XG5cbiAgY29uc3QgciA9IE5leHRSZXNwb25zZS5qc29uKHsgYXBwb2ludG1lbnQ6IHsgLi4uYXBwdCwgZ29vZ2xlX2V2ZW50X2lkOiBnb29nbGVFdmVudElkIH0sIGdvb2dsZUVycm9yLCBzdGFydDogbm9ybVN0YXJ0LCBlbmQ6IG5vcm1FbmQgfSlcbiAgc2V0Q29va2llcy5mb3JFYWNoKChrdikgPT4gci5jb29raWVzLnNldChrdi5uYW1lLCBrdi52YWx1ZSwgeyBodHRwT25seTogdHJ1ZSwgc2FtZVNpdGU6ICdsYXgnLCBzZWN1cmU6IGZhbHNlLCBwYXRoOiAnLycgfSkpXG4gIHJldHVybiByXG59XG5cbi8vIEhlbHBlcnMgc2hhcmVkIHdpdGggYXZhaWxhYmlsaXR5IHJvdXRlXG5mdW5jdGlvbiBub3JtYWxpemVSZmMzMzM5KGlucHV0OiBzdHJpbmcsIHRpbWVab25lPzogc3RyaW5nKTogc3RyaW5nIHtcbiAgaWYgKCFpbnB1dCkgcmV0dXJuIGlucHV0XG4gIGNvbnN0IGhhc1R6ID0gL1t6Wl18WystXVxcZHsyfTpcXGR7Mn0kLy50ZXN0KGlucHV0KVxuICBsZXQgcyA9IGlucHV0XG4gIGlmICgvXlxcZHs0fS1cXGR7Mn0tXFxkezJ9VFxcZHsyfTpcXGR7Mn0kLy50ZXN0KHMpKSBzICs9ICc6MDAnXG4gIGlmIChoYXNUeikgcmV0dXJuIHNcbiAgaWYgKCF0aW1lWm9uZSkgcmV0dXJuIHMgKyAnWidcbiAgY29uc3QgbSA9IHMubWF0Y2goL14oXFxkezR9KS0oXFxkezJ9KS0oXFxkezJ9KVQoXFxkezJ9KTooXFxkezJ9KTooXFxkezJ9KSQvKVxuICBpZiAoIW0pIHJldHVybiBzICsgJ1onXG4gIGNvbnN0IHkgPSBOdW1iZXIobVsxXSk7IGNvbnN0IG1vID0gTnVtYmVyKG1bMl0pOyBjb25zdCBkID0gTnVtYmVyKG1bM10pOyBjb25zdCBoID0gTnVtYmVyKG1bNF0pOyBjb25zdCBtaSA9IE51bWJlcihtWzVdKTsgY29uc3Qgc2UgPSBOdW1iZXIobVs2XSlcbiAgY29uc3QgdXRjUHJvYmUgPSBuZXcgRGF0ZShEYXRlLlVUQyh5LCBtbyAtIDEsIGQsIGgsIG1pLCBzZSkpXG4gIGNvbnN0IG9mZnNldCA9IHR6T2Zmc2V0U3RyaW5nKHRpbWVab25lLCB1dGNQcm9iZSlcbiAgcmV0dXJuIGAke21bMV19LSR7bVsyXX0tJHttWzNdfVQke21bNF19OiR7bVs1XX06JHttWzZdfSR7b2Zmc2V0fWBcbn1cblxuZnVuY3Rpb24gdHpPZmZzZXRTdHJpbmcodGltZVpvbmU6IHN0cmluZywgdXRjRGF0ZTogRGF0ZSk6IHN0cmluZyB7XG4gIGNvbnN0IGZtdCA9IG5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KCdlbi1VUycsIHtcbiAgICB0aW1lWm9uZSxcbiAgICB0aW1lWm9uZU5hbWU6ICdzaG9ydCcsXG4gICAgeWVhcjogJ251bWVyaWMnLCBtb250aDogJzItZGlnaXQnLCBkYXk6ICcyLWRpZ2l0JyxcbiAgICBob3VyOiAnMi1kaWdpdCcsIG1pbnV0ZTogJzItZGlnaXQnLCBzZWNvbmQ6ICcyLWRpZ2l0JywgaG91cjEyOiBmYWxzZVxuICB9KVxuICBjb25zdCBwYXJ0cyA9IGZtdC5mb3JtYXRUb1BhcnRzKHV0Y0RhdGUpXG4gIGNvbnN0IHR6TmFtZSA9IHBhcnRzLmZpbmQoKHApID0+IHAudHlwZSA9PT0gJ3RpbWVab25lTmFtZScpPy52YWx1ZSB8fCAnR01UKzAnXG4gIGNvbnN0IG0gPSB0ek5hbWUubWF0Y2goL0dNVChbKy1dKShcXGR7MSwyfSkvKVxuICBpZiAoIW0pIHJldHVybiAnWidcbiAgY29uc3Qgc2lnbiA9IG1bMV0gPT09ICctJyA/ICctJyA6ICcrJ1xuICBjb25zdCBoaCA9IFN0cmluZyhOdW1iZXIobVsyXSkpLnBhZFN0YXJ0KDIsICcwJylcbiAgcmV0dXJuIGAke3NpZ259JHtoaH06MDBgXG59XG4iXSwibmFtZXMiOlsiY29va2llcyIsIk5leHRSZXNwb25zZSIsInJlZnJlc2hHb29nbGVBY2Nlc3NUb2tlbiIsImNyZWF0ZUNsaWVudCIsIlBPU1QiLCJyZXEiLCJib2R5IiwianNvbiIsIm9yZ2FuaXphdGlvbklkIiwiY3VzdG9tZXIiLCJzdGFydCIsImVuZCIsIm5vdGVzIiwiY2FsZW5kYXJJZCIsIlJlc3BvbnNlIiwiSlNPTiIsInN0cmluZ2lmeSIsImVycm9yIiwic3RhdHVzIiwic3VwYWJhc2VVcmwiLCJwcm9jZXNzIiwiZW52IiwiU1VQQUJBU0VfVVJMIiwic3VwYWJhc2VLZXkiLCJTVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZIiwiU1VQQUJBU0VfQU5PTl9LRVkiLCJzdXBhYmFzZSIsIm9yZ1R6IiwiZGF0YSIsIm9yZ1JvdyIsImZyb20iLCJzZWxlY3QiLCJlcSIsInNpbmdsZSIsInRpbWV6b25lIiwidW5kZWZpbmVkIiwibm9ybVN0YXJ0Iiwibm9ybWFsaXplUmZjMzMzOSIsIm5vcm1FbmQiLCJhcHB0IiwiaW5zZXJ0Iiwib3JnYW5pemF0aW9uX2lkIiwiY3VzdG9tZXJfbmFtZSIsIm5hbWUiLCJjdXN0b21lcl9waG9uZSIsInBob25lIiwiY3VzdG9tZXJfZW1haWwiLCJlbWFpbCIsInNjaGVkdWxlZF9zdGFydCIsInNjaGVkdWxlZF9lbmQiLCJkZXRhaWwiLCJtZXNzYWdlIiwiYyIsImdBY2Nlc3NUb2tlbiIsImdldCIsInZhbHVlIiwiR09PR0xFX0NBTEVOREFSX0FDQ0VTU19UT0tFTiIsInJlZnJlc2hUb2siLCJleHBpcnkiLCJOdW1iZXIiLCJub3dTZWMiLCJNYXRoIiwiZmxvb3IiLCJEYXRlIiwibm93Iiwic2V0Q29va2llcyIsIkdPT0dMRV9DTElFTlRfSUQiLCJHT09HTEVfQ0xJRU5UX1NFQ1JFVCIsInJ0IiwiYWNjZXNzX3Rva2VuIiwibmV3RXhwaXJ5IiwiZXhwaXJlc19pbiIsInB1c2giLCJTdHJpbmciLCJnb29nbGVFdmVudElkIiwiZ29vZ2xlRXJyb3IiLCJldmVudCIsInN1bW1hcnkiLCJkZXNjcmlwdGlvbiIsInRyaW0iLCJkYXRlVGltZSIsInJlc3AiLCJmZXRjaCIsImVuY29kZVVSSUNvbXBvbmVudCIsIm1ldGhvZCIsImhlYWRlcnMiLCJBdXRob3JpemF0aW9uIiwib2siLCJpZCIsInVwZGF0ZSIsImdvb2dsZV9ldmVudF9pZCIsInRleHQiLCJlIiwiciIsImFwcG9pbnRtZW50IiwiZm9yRWFjaCIsImt2Iiwic2V0IiwiaHR0cE9ubHkiLCJzYW1lU2l0ZSIsInNlY3VyZSIsInBhdGgiLCJpbnB1dCIsInRpbWVab25lIiwiaGFzVHoiLCJ0ZXN0IiwicyIsIm0iLCJtYXRjaCIsInkiLCJtbyIsImQiLCJoIiwibWkiLCJzZSIsInV0Y1Byb2JlIiwiVVRDIiwib2Zmc2V0IiwidHpPZmZzZXRTdHJpbmciLCJ1dGNEYXRlIiwiZm10IiwiSW50bCIsIkRhdGVUaW1lRm9ybWF0IiwidGltZVpvbmVOYW1lIiwieWVhciIsIm1vbnRoIiwiZGF5IiwiaG91ciIsIm1pbnV0ZSIsInNlY29uZCIsImhvdXIxMiIsInBhcnRzIiwiZm9ybWF0VG9QYXJ0cyIsInR6TmFtZSIsImZpbmQiLCJwIiwidHlwZSIsInNpZ24iLCJoaCIsInBhZFN0YXJ0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/appointments/book/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/google.ts":
/*!***********************!*\
  !*** ./lib/google.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   refreshGoogleAccessToken: () => (/* binding */ refreshGoogleAccessToken)\n/* harmony export */ });\nasync function refreshGoogleAccessToken(refreshToken, clientId, clientSecret) {\n    const r = await fetch(\"https://oauth2.googleapis.com/token\", {\n        method: \"POST\",\n        headers: {\n            \"Content-Type\": \"application/x-www-form-urlencoded\"\n        },\n        body: new URLSearchParams({\n            client_id: clientId,\n            client_secret: clientSecret,\n            refresh_token: refreshToken,\n            grant_type: \"refresh_token\"\n        })\n    });\n    if (!r.ok) return null;\n    return await r.json();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvZ29vZ2xlLnRzIiwibWFwcGluZ3MiOiI7Ozs7QUFBTyxlQUFlQSx5QkFDcEJDLFlBQW9CLEVBQ3BCQyxRQUFnQixFQUNoQkMsWUFBb0I7SUFFcEIsTUFBTUMsSUFBSSxNQUFNQyxNQUFNLHVDQUF1QztRQUMzREMsUUFBUTtRQUNSQyxTQUFTO1lBQUUsZ0JBQWdCO1FBQW9DO1FBQy9EQyxNQUFNLElBQUlDLGdCQUFnQjtZQUN4QkMsV0FBV1I7WUFDWFMsZUFBZVI7WUFDZlMsZUFBZVg7WUFDZlksWUFBWTtRQUNkO0lBQ0Y7SUFDQSxJQUFJLENBQUNULEVBQUVVLEVBQUUsRUFBRSxPQUFPO0lBQ2xCLE9BQVEsTUFBTVYsRUFBRVcsSUFBSTtBQUN0QiIsInNvdXJjZXMiOlsid2VicGFjazovL0Bjb250YXgvZGVtby13ZWIvLi9saWIvZ29vZ2xlLnRzPzNjZTMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlZnJlc2hHb29nbGVBY2Nlc3NUb2tlbihcbiAgcmVmcmVzaFRva2VuOiBzdHJpbmcsXG4gIGNsaWVudElkOiBzdHJpbmcsXG4gIGNsaWVudFNlY3JldDogc3RyaW5nXG4pOiBQcm9taXNlPHsgYWNjZXNzX3Rva2VuOiBzdHJpbmc7IGV4cGlyZXNfaW46IG51bWJlciB9IHwgbnVsbD4ge1xuICBjb25zdCByID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vb2F1dGgyLmdvb2dsZWFwaXMuY29tL3Rva2VuJywge1xuICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnIH0sXG4gICAgYm9keTogbmV3IFVSTFNlYXJjaFBhcmFtcyh7XG4gICAgICBjbGllbnRfaWQ6IGNsaWVudElkLFxuICAgICAgY2xpZW50X3NlY3JldDogY2xpZW50U2VjcmV0LFxuICAgICAgcmVmcmVzaF90b2tlbjogcmVmcmVzaFRva2VuLFxuICAgICAgZ3JhbnRfdHlwZTogJ3JlZnJlc2hfdG9rZW4nXG4gICAgfSlcbiAgfSlcbiAgaWYgKCFyLm9rKSByZXR1cm4gbnVsbFxuICByZXR1cm4gKGF3YWl0IHIuanNvbigpKSBhcyBhbnlcbn1cblxuIl0sIm5hbWVzIjpbInJlZnJlc2hHb29nbGVBY2Nlc3NUb2tlbiIsInJlZnJlc2hUb2tlbiIsImNsaWVudElkIiwiY2xpZW50U2VjcmV0IiwiciIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsImJvZHkiLCJVUkxTZWFyY2hQYXJhbXMiLCJjbGllbnRfaWQiLCJjbGllbnRfc2VjcmV0IiwicmVmcmVzaF90b2tlbiIsImdyYW50X3R5cGUiLCJvayIsImpzb24iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/google.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/tr46","vendor-chunks/whatwg-url","vendor-chunks/webidl-conversions"], () => (__webpack_exec__("(rsc)/../../node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fappointments%2Fbook%2Froute&page=%2Fapi%2Fappointments%2Fbook%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fappointments%2Fbook%2Froute.ts&appDir=%2FUsers%2Frennychan%2FPersonal%20Apps%2Fcontax%2Fapps%2Fdemo-web%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Frennychan%2FPersonal%20Apps%2Fcontax%2Fapps%2Fdemo-web&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();